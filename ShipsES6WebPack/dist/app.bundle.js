!function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=document.getElementById("canvas"),s=i.getContext("2d");t.canvas=i,t.ctx=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n,s,r,o,a){i(this,e),this.x=void 0===t?0:t,this.y=void 0===n?0:n,this.width=void 0===s?0:s,this.height=void 0===r?this.width:r,this.type=void 0===o?1:o,this.health=void 0===a?1:a,this.timer=0,this.elapsedTime=0}return s(e,[{key:"intersects",value:function(e){if(void 0!==e)return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y;window.console.warn("Missing parameters on function intersects")}},{key:"rectCollision",value:function(e){if(void 0!==e)return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y;window.console.warn("Missing parameters on function intersects")}},{key:"fill",value:function(e){void 0===e?window.console.warn("Missing parameters on function fill"):e.fillRect(this.x,this.y,10,10)}},{key:"drawImage",value:function(e,t){void 0===t?window.console.warn("Missing parameters on function drawImage"):t.width?e.drawImage(t,this.x,this.y):e.strokeRect(this.x,this.y,this.width,this.height)}},{key:"drawImageArea",value:function(e,t,n,i,s,r){t.width?e.drawImage(t,n,i,s,r,this.x,this.y,this.width,this.height):e.strokeRect(this.x,this.y,this.width,this.height)}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.pressing=[],this.lastPress=null,this.x=0,this.y=0,this.KEY_LEFT=37,this.KEY_UP=38,this.KEY_RIGHT=39,this.KEY_DOWN=40,this.KEY_ENTER=13,this.KEY_SPACE=32}return s(e,[{key:"listen",value:function(){var e=this;document.addEventListener("keyup",function(t){e.pressing[t.keyCode]=!1},!1),document.addEventListener("keydown",function(t){e.lastPress=t.keyCode,e.pressing[t.keyCode]=!0},!1)}}]),e}();t.keyboard=new r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e)}return s(e,null,[{key:"mathRandom",value:function(e){return Math.floor(Math.random()*e)}}]),e}();t.default=r},function(e,t,n){"use strict";var i=n(5),s=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(2);window.onload=function(){r.keyboard.listen(),(new s.default).init()}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(6),a=i(o),u=n(8),h=i(u),l=n(9),c=i(l),f=n(10),p=i(f),y=n(2),d=n(0),v=n(3),m=i(v),w=function(){function e(){s(this,e),this.spritesheet=new Image,this.spritesheet.src="../../ShipsES6WebPack/src/assets/spritesheet.png",this.gunImg=new Image,this.gunImg.src="../../ShipsES6WebPack/src/assets/gun.png",this.starImg=new Image,this.starImg.src="../../ShipsES6WebPack/src/assets/star.png",this.player=null,this.enemies=[],this.stars=[],this.powerUps=[],this.state="playing",this.gameOver=!1}return r(e,[{key:"init",value:function(){this.createArena(),this.update()}},{key:"update",value:function(){this.render(),this.changeState(),this.resume(),this.pause(),this.checkPlayerHealth(),setTimeout(this.update.bind(this),40)}},{key:"render",value:function(){d.ctx.fillStyle="#000",d.ctx.fillRect(0,0,d.canvas.width,d.canvas.height),this.player.render(this.spritesheet);for(var e=0,t=this.enemies.length;e<t;e++)this.enemies[e].render(this.spritesheet);for(var n=0,i=this.player.shots.length;n<i;n++)this.player.shots[n].drawImageArea(d.ctx,this.spritesheet,70,0,10,10);for(var s=0,r=this.powerUps.length;s<r;s++)this.powerUps[s].render(this.gunImg,this.starImg);for(var o=0,a=this.stars.length;o<a;o++)this.stars[o].render();d.ctx.fillStyle="#fff",d.ctx.textAlign="left",d.ctx.fillText("Score: "+this.player.score,10,20),d.ctx.fillStyle="#fff",d.ctx.textAlign="left",d.ctx.fillText("Lives: "+this.player.health,d.canvas.width-45,20),"pause"===this.state&&(d.ctx.textAlign="center",d.ctx.fillStyle="white",d.ctx.fillText("PAUSE",100,150)),"over"===this.state&&(d.ctx.textAlign="center",d.ctx.fillStyle="white",d.ctx.fillText("GAME OVER",100,150))}},{key:"resume",value:function(){if("playing"===this.state){for(var e=0,t=this.stars.length;e<t;e++)this.stars[e].update();this.player.update(),this.enemyAction();for(var n=0,i=this.player.shots.length;n<i;n++)this.player.shots[n].update(),this.player.shots[n].y<0&&(this.player.shots.splice(n--,1),i--);for(var s=0,r=this.powerUps.length;s<r;s++)this.player.checkPowerUp(this.powerUps[s])&&(this.powerUps.splice(s--,1),r--)}}},{key:"changeState",value:function(){y.keyboard.lastPress===y.keyboard.KEY_ENTER&&("pause"===this.state?this.state="playing":"playing"===this.state?this.state="pause":"over"===this.state&&y.keyboard.lastPress===y.keyboard.KEY_ENTER&&(this.createArena(),this.state="playing"))}},{key:"pause",value:function(){y.keyboard.lastPress=null}},{key:"checkPlayerHealth",value:function(){0==this.player.health&&(this.state="over")}},{key:"enemyAction",value:function(){for(var e=0,t=this.enemies.length;e<t;e++){this.enemies[e].update(this.player);for(var n=0,i=this.player.shots.length;n<i;n++)if(this.player.shots[n].rectCollision(this.enemies[e])){if(0==--this.enemies[e].health){this.player.score++;var s=m.default.mathRandom(20);s<5&&(0==s?this.powerUps.push(new p.default(this.enemies[e].x,this.enemies[e].y,10,10,1)):this.powerUps.push(new p.default(this.enemies[e].x,this.enemies[e].y,10,10,0))),this.enemies[e].x=10*m.default.mathRandom(d.canvas.width/10),this.enemies[e].y=0,this.enemies[e].health=2,this.enemies.push(new h.default(10*m.default.mathRandom(d.canvas.width/10),0,10,10,0,2))}else this.enemies[e].timer=1;this.player.shots.splice(n--,1),i--}}}},{key:"createArena",value:function(){this.gameover=!1,this.state="playing",this.player=new a.default(90,290,10,10,0,3),this.enemy=new h.default(90,290,10,10,0,3),this.score=0,this.enemies=[],this.powerUps=[],this.stars=[];for(var e=0;e<200;e++)this.stars.push(new c.default(m.default.mathRandom(d.canvas.width),m.default.mathRandom(d.canvas.height)));this.enemies.push(new h.default(30,20,10,10,0,2)),this.enemies.push(new h.default(10,20,10,10,0,2)),this.enemies.push(new h.default(50,20,10,10,0,2)),this.enemies.push(new h.default(80,0,10,10,0,2)),this.enemies.push(new h.default(100,0,10,10,0,2)),this.enemies.push(new h.default(120,0,10,10,0,2)),this.enemies.push(new h.default(150,20,10,10,0,2)),this.enemies.push(new h.default(170,20,10,10,0,2)),this.enemies.push(new h.default(190,20,10,10,0,2))}}]),e}();t.default=w},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),h=i(u),l=n(7),c=i(l),f=n(2),p=n(0),y=function(e){function t(e,n,i,o,a,u){s(this,t);var h=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,o,a,u));return h.shots=[],h.score=0,h}return o(t,e),a(t,[{key:"update",value:function(){this.movePlayer(),this.checkShots(),this.checkPosition()}},{key:"render",value:function(e){this.timer%2==0&&this.drawImageArea(p.ctx,e,~~(10*this.elapsedTime)%3*10,0,10,10)}},{key:"movePlayer",value:function(){f.keyboard.pressing[f.keyboard.KEY_UP]&&(this.y-=10),f.keyboard.pressing[f.keyboard.KEY_RIGHT]&&(this.x+=10),f.keyboard.pressing[f.keyboard.KEY_DOWN]&&(this.y+=10),f.keyboard.pressing[f.keyboard.KEY_LEFT]&&(this.x-=10)}},{key:"checkShots",value:function(){f.keyboard.lastPress==f.keyboard.KEY_SPACE&&(3==this.multiShot?(this.shots.push(new c.default(this.x,this.y,5,5)),this.shots.push(new c.default(this.x+5,this.y,5,5)),this.shots.push(new c.default(this.x+9,this.y+2,5,5))):2==this.multiShot?(this.shots.push(new c.default(this.x,this.y,5,5)),this.shots.push(new c.default(this.x+5,this.y,5,5))):this.shots.push(new c.default(this.x+3,this.y,5,5)),f.keyboard.lastPress=null)}},{key:"checkPosition",value:function(){this.x>p.canvas.width-10&&(this.x=p.canvas.width-10),this.x<0&&(this.x=0),this.y>p.canvas.height-10&&(this.y=p.canvas.height-10),this.y<0&&(this.y=0),this.timer>0&&(this.timer=this.timer-1)}},{key:"checkPowerUp",value:function(e){if(e.y+=4,this.intersects(e))return 1==e.type&&this.multiShot<3?this.multiShot++:this.score+=5,!0}}]),t}(h.default);t.default=y},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(a),h=(n(0),function(e){function t(e,n,r,o,a,u){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,o,a,u))}return r(t,e),o(t,[{key:"update",value:function(){this.moveShots()}},{key:"moveShots",value:function(){this.y-=10}}]),t}(u.default));t.default=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),h=i(u),l=n(3),c=i(l),f=n(0),p=function(e){function t(e,n,i,o,a,u){return s(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,o,a,u))}return o(t,e),a(t,[{key:"update",value:function(e){this.moveEnemy(),this.intersectPlayer(e)}},{key:"render",value:function(e){this.timer%2==0?(f.ctx.strokeStyle="#00f",this.drawImageArea(f.ctx,e,30,0,10,10)):(f.ctx.strokeStyle="#fff",this.drawImageArea(f.ctx,e,40,0,10,10))}},{key:"moveEnemy",value:function(){this.y+=2,this.timer>0&&this.timer--,this.y>f.canvas.height&&(this.x=10*c.default.mathRandom(f.canvas.width/10),this.y=0)}},{key:"intersectPlayer",value:function(e){this.intersects(e)&&0==e.timer&&(e.health-=1,e.timer=20)}}]),t}(h.default);t.default=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=function(){function e(t,n){i(this,e),this.x=void 0===t?0:t,this.y=void 0===n?0:n}return s(e,[{key:"update",value:function(){this.moveStars()}},{key:"render",value:function(){r.ctx.fillStyle="#fff",r.ctx.fillRect(this.x,this.y,1,1)}},{key:"moveStars",value:function(){++this.y>canvas.height&&(this.y=0)}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(a),h=n(0),l=function(e){function t(e,n,r,o,a,u){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,o,a,u))}return r(t,e),o(t,[{key:"render",value:function(e,t){1==this.type?(h.ctx.strokeStyle="#f90",this.drawImage(h.ctx,e)):(h.ctx.strokeStyle="#cc6",this.drawImage(h.ctx,t))}}]),t}(u.default);t.default=l}]);